// ==UserScript==
// @name Reading Mode
// @namespace blog.sylingd.com
// @description 阅读模式
// @author ShuangYa
// @include http://blog.csdn.net/*/article/details/*
// @include https://blog.csdn.net/*/article/details/*
// @include http://*.cnblogs.com/*/p/*
// @include http://*.cnblogs.com/*/archive/*
// @include http://*.cnblogs.com/*/articles/*
// @include https://*.cnblogs.com/*/p/*
// @include https://*.cnblogs.com/*/archive/*
// @include https://*.cnblogs.com/*/articles/*
// @include http://blog.sina.com.cn/s/blog_*.html
// @include http://*.blog.163.com/blog/static/*
// @include http://*.blog.sohu.com/*
// @include https://juejin.im/entry/*
// @include https://zhuanlan.zhihu.com/p/*
// @include http://blog.tianya.cn/post-*
// @include https://blog.tianya.cn/post-*
// @include http://blog.sciencenet.cn/blog-*
// @include http://blog.chinaunix.net/uid-*
// @grant GM_addStyle
// @grant GM_setValue
// @grant GM_getValue
// @version 14
// @updateURL https://userscript.firefoxcn.net/js/Reading_Mode.meta.js
// @downloadURL https://userscript.firefoxcn.net/js/Reading_Mode.user.js
// ==/UserScript==

!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){(e=n(1)(!1)).push([t.i,"body.show-reading{overflow:hidden}._2TM72AgxdWgB2lR0Jud1l9{position:fixed;bottom:0;left:50%;height:46px;width:190px;margin-left:-90px;z-index:99999998;background-color:#fff;padding:5px;box-sizing:border-box;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}._2TM72AgxdWgB2lR0Jud1l9 button,._3yjtf1Urj7WWlmMwiBYJDk ._37Anb3ezibH-B3iAH9KVe8 button{background:0 0;border:none;border-radius:2px;color:#000;position:relative;height:36px;margin:0;min-width:64px;padding:0 16px;display:inline-block;font-size:14px;font-weight:500;letter-spacing:0;overflow:hidden;outline:none;cursor:pointer;text-align:center;line-height:36px;transition:background-color .2s cubic-bezier(.4,0,.2,1)}._2TM72AgxdWgB2lR0Jud1l9 button:hover,._3yjtf1Urj7WWlmMwiBYJDk ._37Anb3ezibH-B3iAH9KVe8 button:hover{background-color:hsla(0,0%,62%,.2)}._2TM72AgxdWgB2lR0Jud1l9 button:active,._3yjtf1Urj7WWlmMwiBYJDk ._37Anb3ezibH-B3iAH9KVe8 button:active{background-color:hsla(0,0%,62%,.4)}._3yjtf1Urj7WWlmMwiBYJDk{position:fixed;top:0;left:0;height:100%;width:100%;z-index:99999999;overflow:auto;box-sizing:border-box;font-family:Microsoft YaHei,PingFang SC,Lantinghei SC,WenQuanYi Zen Hei,sans-serif!important;text-align:left!important}._3yjtf1Urj7WWlmMwiBYJDk ._37Anb3ezibH-B3iAH9KVe8{margin-bottom:20px;text-align:center}._3yjtf1Urj7WWlmMwiBYJDk ._37Anb3ezibH-B3iAH9KVe8>*{vertical-align:middle;margin-left:10px;margin-right:10px}._3yjtf1Urj7WWlmMwiBYJDk ._37Anb3ezibH-B3iAH9KVe8 input[type=color]{padding:0;border:0;outline:none;cursor:pointer}._3yjtf1Urj7WWlmMwiBYJDk .lfEzW-QkJuIZ6SnG6kM-b{padding-bottom:20px;margin-bottom:20px}",""]),e.locals={bar:"_2TM72AgxdWgB2lR0Jud1l9",rm:"_3yjtf1Urj7WWlmMwiBYJDk",option:"_37Anb3ezibH-B3iAH9KVe8",title:"lfEzW-QkJuIZ6SnG6kM-b"},t.exports=e,GM_addStyle(e[0][1])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,_=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(_),"/*# ".concat(c," */")),l=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(l).concat([r]).join("\n")}var i,_,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(o)for(var l=0;l<this.length;l++){var i=this[l][0];null!=i&&(r[i]=!0)}for(var _=0;_<t.length;_++){var c=[].concat(t[_]);o&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";n.r(e);var o=n(0);let r={box_bg:GM_getValue("box_bg")||"#ffffff",text_color:GM_getValue("text_color")||"#000000",font_size:GM_getValue("font_size")||18,box_padding:GM_getValue("box_padding")||30,box_line_height:GM_getValue("box_line_height")||100,font_weight:GM_getValue("font_weight")||"normal"};let l=void 0;function i(){void 0===l&&(l=document.createElement("style"),document.body.appendChild(l)),l.innerHTML=function(){const t=Math.ceil(1.6*r.font_size);let e=`.${o.locals.rm} .option button {\n    color: ${r.text_color};\n  }\n  .${o.locals.rm} {\n    background-color: ${r.box_bg};\n    padding: 15px ${r.box_padding}px;\n  }\n  .${o.locals.rm} .option * {\n    color: ${r.text_color};\n  }\n  .${o.locals.rm} .title {\n    font-size: ${t}px !important;\n    border-bottom: 1px solid ${r.text_color};\n    color: ${r.text_color} !important;\n  }\n  .${o.locals.rm} .content {\n    font-size: ${r.font_size}px !important;\n    line-height: ${r.box_line_height}%;\n    color: ${r.text_color} !important;\n    font-weight: ${r.font_weight} !important;\n  }\n  .${o.locals.rm} h1,\n  .${o.locals.rm} h2,\n  .${o.locals.rm} h3,\n  .${o.locals.rm} h4,\n  .${o.locals.rm} h5,\n  .${o.locals.rm} h6 {\n    font-weight: ${r.font_weight} !important;\n  }`;for(let t=6;t>=1;t--)e+=`.${o.locals.rm} h${t} { font-size: ${r.font_size+2*(7-t)}px; }`;return e}()}function _(t,e){GM_setValue(t,e),r[t]=e,i(),u.forEach(t=>t())}function c(t){return t?r[t]:r}const u=[];const a=JSON.parse(GM_getValue("preset")||"[]"),s=()=>a,f=(t,e)=>{a.push({...e,name:t}),GM_setValue("preset",JSON.stringify(a)),u.forEach(t=>t())},p=t=>{a[t]&&(r=a[t],Object.keys(r).forEach(t=>{GM_getValue(t,r[t])}),i(),u.forEach(t=>t()))};function d(t){return t.replace(/^[\s\n]+/,"").replace(/[\s\n]+$/,"")}function h(t){const e=document.querySelector(t);return e?e.innerHTML:""}function g(t){const e=document.querySelector(t);if(!e)return"";const n=e.cloneNode(!0);return function t(e){Array.prototype.forEach.call(e.children,e=>t(e)),"none"===e.style.display||"0px"===e.style.fontSize||"hidden"===e.style.visibility?e.remove():(e.removeAttribute("id"),e.removeAttribute("color"),e.removeAttribute("class"),e.removeAttribute("style"))}(n),d(n.innerHTML)}const m={"blog.csdn.net":{getTitle(){const t=document.querySelector(".article_title h1");if(t){const e=t.querySelector("a");return d(e?e.innerHTML:t.children[0].innerHTML)}{const t=document.querySelector(".csdn_top"),e=document.querySelector(".title-article");if(t)return d(t.innerHTML);if(e)return d(e.innerHTML)}return""},getContent:()=>g(".article_content")||g(".markdown_views")},"www.cnblogs.com":{getTitle(){const t=document.querySelector(".postTitle a"),e=document.getElementById("cb_post_title_url");return t?t.innerHTML:e?e.innerHTML:""},getContent:()=>g("#cnblogs_post_body")},"blog.sina.com.cn":{getTitle:()=>h(".articalTitle .titName"),getContent:()=>g(".articalContent")},"blog.163.com":{getTitle:()=>h(".title .tcnt"),getContent:()=>g(".nbw-blog")},"blog.sohu.com":{getTitle:()=>h(".newBlog-title h2 span"),getContent:()=>g("#main-content")},"blog.tianya.cn":{getTitle:()=>h(".article a"),getContent:()=>g(".articletext")},"blog.sciencenet.cn":{getTitle:()=>h(".vw h1"),getContent:()=>g("#blog_article")},"blog.chinaunix.net":{getTitle:()=>h(".Blog_tit4 a"),getContent:()=>g(".Blog_wz1")},"juejin.im":{getTitle:()=>h(".entry-content-box > h1"),getContent:()=>h(".article-content").replace(/data\-src="(.*?)"(.*?)src="(.*?)"/g,'data-src="$1"$2src="$1"')},"zhuanlan.zhihu.com":{getTitle:()=>h(".Post-Title"),getContent:()=>g(".Post-RichTextContainer")}};const b=function(){const t=window.location.hostname;if(void 0!==m[t])return t;const e=Object.values(m);for(const n in e)if(t.includes(n))return n;return""}();function v(){return void 0!==m[b]}var y,x,k,w,M,C={},T=[],H=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function S(t,e){for(var n in e)t[n]=e[n];return t}function A(t){var e=t.parentNode;e&&e.removeChild(t)}function j(t,e,n){var o,r=arguments,l={};for(o in e)"key"!==o&&"ref"!==o&&(l[o]=e[o]);if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(r[o]);if(null!=n&&(l.children=n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===l[o]&&(l[o]=t.defaultProps[o]);return W(t,l,e&&e.key,e&&e.ref,null)}function W(t,e,n,o,r){var l={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(l.__v=l),y.vnode&&y.vnode(l),l}function z(t){return t.children}function $(t,e){this.props=t,this.context=e}function E(t,e){if(null==e)return t.__?E(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?E(t):null}function B(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return B(t)}}function N(t){(!t.__d&&(t.__d=!0)&&x.push(t)&&!P.__r++||w!==y.debounceRendering)&&((w=y.debounceRendering)||k)(P)}function P(){for(var t;P.__r=x.length;)t=x.sort((function(t,e){return t.__v.__b-e.__v.__b})),x=[],t.some((function(t){var e,n,o,r,l,i,_;t.__d&&(i=(l=(e=t).__v).__e,(_=e.__P)&&(n=[],(o=S({},l)).__v=o,r=O(_,l,o,e.__n,void 0!==_.ownerSVGElement,null,n,null==i?E(l):i),R(n,l),r!=i&&B(l)))}))}function U(t,e,n,o,r,l,i,_,c,u){var a,s,f,p,d,h,g,m=o&&o.__k||T,b=m.length;for(c==C&&(c=null!=i?i[0]:b?E(o,0):null),n.__k=[],a=0;a<e.length;a++)if(null!=(p=n.__k[a]=null==(p=e[a])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p?W(null,p,null,null,p):Array.isArray(p)?W(z,{children:p},null,null,null):null!=p.__e||null!=p.__c?W(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(f=m[a])||f&&p.key==f.key&&p.type===f.type)m[a]=void 0;else for(s=0;s<b;s++){if((f=m[s])&&p.key==f.key&&p.type===f.type){m[s]=void 0;break}f=null}d=O(t,p,f=f||C,r,l,i,_,c,u),(s=p.ref)&&f.ref!=s&&(g||(g=[]),f.ref&&g.push(f.ref,null,p),g.push(s,p.__c||d,p)),null!=d?(null==h&&(h=d),c=L(t,p,f,m,i,d,c),"option"==n.type?t.value="":"function"==typeof n.type&&(n.__d=c)):c&&f.__e==c&&c.parentNode!=t&&(c=E(f))}if(n.__e=h,null!=i&&"function"!=typeof n.type)for(a=i.length;a--;)null!=i[a]&&A(i[a]);for(a=b;a--;)null!=m[a]&&Y(m[a],m[a]);if(g)for(a=0;a<g.length;a++)q(g[a],g[++a],g[++a])}function L(t,e,n,o,r,l,i){var _,c,u;if(void 0!==e.__d)_=e.__d,e.__d=void 0;else if(r==n||l!=i||null==l.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(l),_=null;else{for(c=i,u=0;(c=c.nextSibling)&&u<o.length;u+=2)if(c==l)break t;t.insertBefore(l,i),_=i}return void 0!==_?_:l.nextSibling}function D(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===H.test(e)?n+"px":null==n?"":n}function J(t,e,n,o,r){var l,i,_,c,u;if(r?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(l=t.style,"string"==typeof n)l.cssText=n;else{if("string"==typeof o&&(l.cssText="",o=null),o)for(c in o)n&&c in n||D(l,c,"");if(n)for(u in n)o&&n[u]===o[u]||D(l,u,n[u])}else"o"===e[0]&&"n"===e[1]?(i=e!==(e=e.replace(/Capture$/,"")),_=e.toLowerCase(),e=(_ in t?_:e).slice(2),n?(o||t.addEventListener(e,V,i),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,V,i)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!r&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function V(t){this.l[t.type](y.event?y.event(t):t)}function G(t,e,n){var o,r;for(o=0;o<t.__k.length;o++)(r=t.__k[o])&&(r.__=t,r.__e&&("function"==typeof r.type&&r.__k.length>1&&G(r,e,n),e=L(n,r,r,t.__k,null,r.__e,e),"function"==typeof t.type&&(t.__d=e)))}function O(t,e,n,o,r,l,i,_,c){var u,a,s,f,p,d,h,g,m,b,v,x=e.type;if(void 0!==e.constructor)return null;(u=y.__b)&&u(e);try{t:if("function"==typeof x){if(g=e.props,m=(u=x.contextType)&&o[u.__c],b=u?m?m.props.value:u.__:o,n.__c?h=(a=e.__c=n.__c).__=a.__E:("prototype"in x&&x.prototype.render?e.__c=a=new x(g,b):(e.__c=a=new $(g,b),a.constructor=x,a.render=I),m&&m.sub(a),a.props=g,a.state||(a.state={}),a.context=b,a.__n=o,s=a.__d=!0,a.__h=[]),null==a.__s&&(a.__s=a.state),null!=x.getDerivedStateFromProps&&(a.__s==a.state&&(a.__s=S({},a.__s)),S(a.__s,x.getDerivedStateFromProps(g,a.__s))),f=a.props,p=a.state,s)null==x.getDerivedStateFromProps&&null!=a.componentWillMount&&a.componentWillMount(),null!=a.componentDidMount&&a.__h.push(a.componentDidMount);else{if(null==x.getDerivedStateFromProps&&g!==f&&null!=a.componentWillReceiveProps&&a.componentWillReceiveProps(g,b),!a.__e&&null!=a.shouldComponentUpdate&&!1===a.shouldComponentUpdate(g,a.__s,b)||e.__v===n.__v){a.props=g,a.state=a.__s,e.__v!==n.__v&&(a.__d=!1),a.__v=e,e.__e=n.__e,e.__k=n.__k,a.__h.length&&i.push(a),G(e,_,t);break t}null!=a.componentWillUpdate&&a.componentWillUpdate(g,a.__s,b),null!=a.componentDidUpdate&&a.__h.push((function(){a.componentDidUpdate(f,p,d)}))}a.context=b,a.props=g,a.state=a.__s,(u=y.__r)&&u(e),a.__d=!1,a.__v=e,a.__P=t,u=a.render(a.props,a.state,a.context),a.state=a.__s,null!=a.getChildContext&&(o=S(S({},o),a.getChildContext())),s||null==a.getSnapshotBeforeUpdate||(d=a.getSnapshotBeforeUpdate(f,p)),v=null!=u&&u.type==z&&null==u.key?u.props.children:u,U(t,Array.isArray(v)?v:[v],e,n,o,r,l,i,_,c),a.base=e.__e,a.__h.length&&i.push(a),h&&(a.__E=a.__=null),a.__e=!1}else null==l&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=F(n.__e,e,n,o,r,l,i,c);(u=y.diffed)&&u(e)}catch(t){e.__v=null,y.__e(t,e,n)}return e.__e}function R(t,e){y.__c&&y.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){y.__e(t,e.__v)}}))}function F(t,e,n,o,r,l,i,_){var c,u,a,s,f,p=n.props,d=e.props;if(r="svg"===e.type||r,null!=l)for(c=0;c<l.length;c++)if(null!=(u=l[c])&&((null===e.type?3===u.nodeType:u.localName===e.type)||t==u)){t=u,l[c]=null;break}if(null==t){if(null===e.type)return document.createTextNode(d);t=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,d.is&&{is:d.is}),l=null,_=!1}if(null===e.type)p!==d&&t.data!=d&&(t.data=d);else{if(null!=l&&(l=T.slice.call(t.childNodes)),a=(p=n.props||C).dangerouslySetInnerHTML,s=d.dangerouslySetInnerHTML,!_){if(null!=l)for(p={},f=0;f<t.attributes.length;f++)p[t.attributes[f].name]=t.attributes[f].value;(s||a)&&(s&&a&&s.__html==a.__html||(t.innerHTML=s&&s.__html||""))}(function(t,e,n,o,r){var l;for(l in n)"children"===l||"key"===l||l in e||J(t,l,null,n[l],o);for(l in e)r&&"function"!=typeof e[l]||"children"===l||"key"===l||"value"===l||"checked"===l||n[l]===e[l]||J(t,l,e[l],n[l],o)})(t,d,p,r,_),s?e.__k=[]:(c=e.props.children,U(t,Array.isArray(c)?c:[c],e,n,o,"foreignObject"!==e.type&&r,l,i,C,_)),_||("value"in d&&void 0!==(c=d.value)&&c!==t.value&&J(t,"value",c,p.value,!1),"checked"in d&&void 0!==(c=d.checked)&&c!==t.checked&&J(t,"checked",c,p.checked,!1))}return t}function q(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){y.__e(t,n)}}function Y(t,e,n){var o,r,l;if(y.unmount&&y.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||q(o,null,e)),n||"function"==typeof t.type||(n=null!=(r=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){y.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(l=0;l<o.length;l++)o[l]&&Y(o[l],e,n);null!=r&&A(r)}function I(t,e,n){return this.constructor(t,n)}function K(t,e,n){var o,r,l;y.__&&y.__(t,e),r=(o=n===M)?null:n&&n.__k||e.__k,t=j(z,null,[t]),l=[],O(e,(o?e:n||e).__k=t,r||C,C,void 0!==e.ownerSVGElement,n&&!o?[n]:r?null:e.childNodes.length?T.slice.call(e.childNodes):null,l,n||C,o),R(l,t)}y={__e:function(t,e){for(var n,o;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(t)),o)return N(n.__E=n)}catch(e){t=e}throw t}},$.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=S({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&S(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),N(this))},$.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),N(this))},$.prototype.render=z,x=[],k="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,P.__r=0,M=C;var Q,Z,X,tt=0,et=[],nt=y.__r,ot=y.diffed,rt=y.__c,lt=y.unmount;function it(t,e){y.__h&&y.__h(Z,t,tt||e),tt=0;var n=Z.__H||(Z.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function _t(t){return tt=1,function(t,e,n){var o=it(Q++,2);return o.t=t,o.__c||(o.__c=Z,o.__=[n?n(e):dt(void 0,e),function(t){var e=o.t(o.__[0],t);o.__[0]!==e&&(o.__=[e,o.__[1]],o.__c.setState({}))}]),o.__}(dt,t)}function ct(t,e){var n=it(Q++,3);!y.__s&&pt(n.__H,e)&&(n.__=t,n.__H=e,Z.__H.__h.push(n))}function ut(){et.some((function(t){if(t.__P)try{t.__H.__h.forEach(st),t.__H.__h.forEach(ft),t.__H.__h=[]}catch(e){return t.__H.__h=[],y.__e(e,t.__v),!0}})),et=[]}y.__r=function(t){nt&&nt(t),Q=0;var e=(Z=t.__c).__H;e&&(e.__h.forEach(st),e.__h.forEach(ft),e.__h=[])},y.diffed=function(t){ot&&ot(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==et.push(e)&&X===y.requestAnimationFrame||((X=y.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(o),at&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);at&&(e=requestAnimationFrame(n))})(ut))},y.__c=function(t,e){e.some((function(t){try{t.__h.forEach(st),t.__h=t.__h.filter((function(t){return!t.__||ft(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],y.__e(n,t.__v)}})),rt&&rt(t,e)},y.unmount=function(t){lt&&lt(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(st)}catch(t){y.__e(t,e.__v)}};var at="function"==typeof requestAnimationFrame;function st(t){"function"==typeof t.u&&t.u()}function ft(t){t.u=t.__()}function pt(t,e){return!t||e.some((function(e,n){return e!==t[n]}))}function dt(t,e){return"function"==typeof e?e(t):e}var ht=t=>j("div",{className:o.locals.bar},j("button",{onClick:t.onEnter},"进入阅读模式"),j("button",{onClick:t.onClose},"关闭"));var gt=t=>{const[e,n]=_t(""),[r,l]=_t(""),[,i]=_t(0);ct(()=>{if(t.show&&""===e){const t=function(){const t=b,e={title:"",content:""};return v()&&(e.title=m[t].getTitle(),e.content=m[t].getContent()),e}();n(t.title),l(t.content)}}),ct(()=>{const t=()=>i(t=>t+1);var e;return e=t,u.push(e),()=>{!function(t){u.includes(t)&&u.splice(u.indexOf(t),1)}(t)}},[]);const a=c("font_weight");return j("div",{className:o.locals.rm,style:{display:t.show?"block":"none"}},j("div",{className:o.locals.option},j("button",{onClick:()=>_("font_size",c("font_size")+1)},"增大字体"),j("button",{onClick:()=>_("font_size",c("font_size")-1)},"减小字体"),j("button",{onClick:()=>_("box_padding",c("box_padding")+10)},"增大边距"),j("button",{onClick:()=>_("box_padding",c("box_padding")-10)},"减小边距"),j("button",{onClick:()=>_("box_line_height",c("box_line_height")+25)},"增大行距"),j("button",{onClick:()=>_("box_line_height",c("box_line_height")-25)},"减小行距"),j("label",null,j("span",null,"文字粗细"),j("select",{onChange:t=>_("font_weight",t.target.value)},j("option",{value:"lighter",selected:"lighter"===a},"细体"),j("option",{value:"normal",selected:"normal"===a},"常规"),j("option",{value:"bold",selected:"bold"===a},"粗体"))),j("label",null,j("span",null,"背景色"),j("input",{type:"color",value:c("box_bg"),onChange:t=>_("box_bg",t.target.value)})),j("label",null,j("span",null,"文字颜色"),j("input",{type:"color",value:c("text_color"),onChange:t=>_("text_color",t.target.value)})),j("label",null,j("span",null,"预设"),j("select",{onChange:t=>p(parseInt(t.target.value))},s().map((t,e)=>j("option",{value:e,selected:!1},t.name)))),j("button",{onClick:()=>{const t=window.prompt("请输入预设名称");t&&f(t,{...c()})}},"保存为预设"),j("button",{onClick:t.onExit},"退出")),j("div",{className:o.locals.title},e),j("div",{className:"content",dangerouslySetInnerHTML:{__html:r}}))};var mt=()=>{const[t,e]=_t(!1),[n,o]=_t(!0);return j("div",null,n&&j(ht,{onEnter:()=>e(!0),onClose:()=>o(!1)}),j(gt,{show:t,onExit:()=>e(!1)}))};if(v()){i();const t=document.createElement("div");document.body.appendChild(t),K(j(mt,null),t)}}]);